<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="generator" content="pandoc">
    <meta name="description" content="">
    <meta name="author" content="Caesarmu">
    <meta name="dcterms.date" content=" 01/03/2024">
  <title>SSAdNDP</title>
  <!-- script type="text/javascript">var filename=location.href;filename=filename.substr(filename.lastIndexOf('/')+1);document.title="SSAdNDP"+"("+filename+")";</script -->
    <!-- Bootstrap core CSS -->
    <link href="/pandocmodels/sidebar/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/pandocmodels/sidebar/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/pandocmodels/sidebar/css/dashboard.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">.sidebar ul{padding-left: 10px;}</style>
    <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
  <!-- style type="text/css">
            width:1220px;
            height:1100px;
            border:solid 1px #ccc;
            /*background:#f4f4f4;*/
            background:#f4f4f4;
        }
  </style -->
  <style type="text/css">
  #hitokoto{
    background-color: #3288d31a;
    padding: 10px;text-align: center;
    color: blue;
    font-weight: bold;
    font-size: 1.2em;
    margin: 5px 0 5px 0;
}
div.card {
   background-color: #f5f5f5;
   color: black;
   text-align: center;
   margin: 0 auto;
   width: 85%;
   max-width: 90%;
}
div.container {
   padding: 10px;
   background-color: white;
}
button{
  border:groove 0.2em gray;
  border-radius:0.4em;
}
  </style>

<script>
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      const hitokoto = document.getElementById('hitokoto_text')
      hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
      hitokoto.innerText = data.hitokoto + " --- " + data.from
    })
    .catch(console.error)
</script>

          <div class='content-body'>
              <p id="hitokoto"><a href="#" id="hitokoto_text">:D 获取中...</a> </p>
          </div>
          

  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/index.html">Home</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/paper.html">Publication</a></li>
            <li><a href="/post.html">Post</a></li>
            <li class="dropdown">
              <a href="/index.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Links <span class="caret"></span></a>
              <ul class="dropdown-menu">  
            <li><a href="/editor/" target="_blank" >MarkDown</a></li>
            <li><a href="/svgedit/editor/svg-editor.html" target="_blank" >SvgEdit</a></li>
            <li><a href="/my-mind/" target="_blank" >MindMap</a></li>
            <li><a target="_blank" href="https://materialsproject.org/">PyMatGen</a></li>
            <li><a target="_blank" href="/games/gold/">GoldMiner</a></li>
            <li><a target="_blank" href="/games/Space/">SpaceInvaders</a></li>
            <li><a target="_blank" href="/games/mario/">SuperMario</a></li>
            <li><a target="_blank" href="/games/star/">StarBattle</a></li>
                <li role="separator" class="divider"></li>
                <li><a  target="_blank" href="http://ims.sxu.edu.cn/">SXU IMS</a></li>
            <li><a target="_blank" href="https://vpn.sxu.edu.cn/portal/">SXU VPN</a></li>
                <li><a  target="_blank" href="http://mail.sxu.edu.cn/">SXU MAIL</a></li>
                <li><a  target="_blank" href="http://ehall.sxu.edu.cn/">SXU MYPORTAL</a></li>
              </ul>
            </li>
            <li><span id="badgeCont708"><script type="text/javascript" src="https://publons.com/mashlets?el=badgeCont708&rid=B-2057-2012&size=small"></script></span></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div id="sidebar" class="col-sm-3 col-md-2 sidebar">
          <!--<ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
          </ul>-->
          <ul>
          <li><a href="#installation"><span class="toc-section-number">1</span> Installation</a>
          <ul>
          <li><a href="#download"><span class="toc-section-number">1.1</span> Download</a></li>
          <li><a href="#install-new-periodic-nbo"><span class="toc-section-number">1.2</span> Install New Periodic NBO</a>
          <ul>
          <li><a href="#new-periodic-nbo-2015"><span class="toc-section-number">1.2.1</span> New Periodic NBO (2015)</a></li>
          </ul></li>
          <li><a href="#nbo-version-vasp"><span class="toc-section-number">1.3</span> NBO version vasp</a></li>
          <li><a href="#install-ssadndp-old-periodic-nbo"><span class="toc-section-number">1.4</span> install SSAdNDP (old Periodic NBO)</a></li>
          </ul></li>
          <li><a href="#example"><span class="toc-section-number">2</span> Example</a></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        
<h1 data-number="1" id="installation"><span class="header-section-number">1</span> Installation</h1>
<h2 data-number="1.1" id="download"><span class="header-section-number">1.1</span> Download</h2>
<ul>
<li>Download SSAdNDP from <a href="http://ion.chem.usu.edu/~boldyrev/ssadndp.php" class="uri">http://ion.chem.usu.edu/~boldyrev/ssadndp.php</a></li>
</ul>
<h2 data-number="1.2" id="install-new-periodic-nbo"><span class="header-section-number">1.2</span> Install New Periodic NBO</h2>
<h3 data-number="1.2.1" id="new-periodic-nbo-2015"><span class="header-section-number">1.2.1</span> New Periodic NBO (2015)</h3>
<p>Ref: <a href="http://bbs.keinsci.com/thread-12111-1-1.html" class="uri">http://bbs.keinsci.com/thread-12111-1-1.html</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xvf</span>  periodic_nbo_v.1.1.tgz</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  projection</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/USE mkl95_BLAS/USE BLAS95/ig;s/USE mkl95_LAPACK/USE LAPACK95/ig&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/zGEMM_MKL95/GEMM/ig;s/DGEMM_MKL95/GEMM/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/DGETRF_MKL95/GETRF/ig;s/ZGETRF_MKL95/GETRF/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/DGETRI_MKL95/GETRI/ig;s/ZGETRI_MKL95/GETRI/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/zheev_mkl95/heev/ig;s/ZGESVD_MKL95/GESVD/ig;s/ZGEMV_MKL95/GEMV/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">###Modify Makefile</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="va">LD</span><span class="op">=</span>ifort</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="va">FC</span><span class="op">=</span>ifort</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="va">FFLAGS</span><span class="op">=</span> <span class="ex">-I</span><span class="va">$(</span><span class="ex">MKLROOT</span><span class="va">)</span><span class="ex">/include/intel64/lp64</span> <span class="at">-mkl</span><span class="op">=</span>sequential</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="va">LDFLAGS</span><span class="op">=</span>-L<span class="va">$(</span><span class="ex">MKLROOT</span><span class="va">)</span>/lib/intel64 <span class="ex">-openmp</span> <span class="at">-lmkl_blas95_lp64</span> <span class="at">-lmkl_lapack95_lp64</span> <span class="at">-lpthread</span> <span class="at">-lm</span> <span class="at">-I</span><span class="va">$(</span><span class="ex">MKLROOT</span><span class="va">)</span>/include/intel64/lp64 <span class="at">-mkl</span><span class="op">=</span>sequential</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">###</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">##Periodic nbo </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xvf</span> periodic_nbo_v.1.1.tgz</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  projection</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/USE mkl95_BLAS/USE BLAS95/ig;s/USE mkl95_LAPACK/USE LAPACK95/ig&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/zGEMM_MKL95/GEMM/ig;s/DGEMM_MKL95/GEMM/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/DGETRF_MKL95/GETRF/ig;s/ZGETRF_MKL95/GETRF/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/DGETRI_MKL95/GETRI/ig;s/ZGETRI_MKL95/GETRI/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i</span> <span class="st">&quot;s/zheev_mkl95/heev/ig;s/ZGESVD_MKL95/GESVD/ig;s/ZGEMV_MKL95/GEMV/ig;&quot;</span> <span class="pp">*</span>.f90</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co">###Modify Makefile.template</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="va">FC</span><span class="op">=</span>ifort</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="va">LD</span><span class="op">=</span>ifort</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co">#FFLAGS=-check all -check noarg_temp_created -g -traceback -warn unused -I $(MKLROOT)/include/intel64/lp64</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="va">FFLAGS</span><span class="op">=</span> <span class="ex">-vec-report0</span> <span class="at">-openmp</span> <span class="at">-I</span> <span class="va">$(</span><span class="ex">MKLROOT</span><span class="va">)</span>/include/intel64/lp64</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="va">LDFLAGS</span><span class="op">=</span>-L<span class="va">$(</span><span class="ex">MKLROOT</span><span class="va">)</span>/lib/intel64 <span class="ex">-lmkl_core</span> <span class="at">-lmkl_intel_lp64</span> <span class="at">-lmkl_sequential</span> <span class="at">-lmkl_blas95_lp64</span> <span class="at">-lmkl_lapack95_lp64</span> <span class="at">-openmp</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">###</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> </span></code></pre></div>
<h2 data-number="1.3" id="nbo-version-vasp"><span class="header-section-number">1.3</span> NBO version vasp</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> projection_output.F proj_VASP_5.4_mod.patch /src</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> src <span class="kw">&amp;&amp;</span> <span class="fu">patch</span><span class="op">&lt;</span>proj_VASP_5.4_mod.patch</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ps: proj_VASP_5.4_mod.patch modifiled from proj_VASP_5.4.patch in Per NBO  </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> std   </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> bin/vasp_std  bin/vasp.impi.nbo</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> build/std build/std.nbo</span></code></pre></div>
<h2 data-number="1.4" id="install-ssadndp-old-periodic-nbo"><span class="header-section-number">1.4</span> install SSAdNDP (old Periodic NBO)</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xvf</span>  projection_v.1.1.2.tgz <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> projection  </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="er">(</span><span class="ex">not</span> use<span class="kw">)</span>    </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xvf</span>  SSAdNDP_program_distr.zip <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> SSAdNDP_program_distr  </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> SSAdNDP/</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="ex">change</span> the PATH for MKL  in Makefile.template, then</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">perl</span> mkmf <span class="at">-t</span> Makefile.template <span class="at">-p</span> ssadndp.exe  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="fu">cp</span> ssadndp.exe ~/.soft/vasp/vaspshell/  </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../Visualization</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="ex">ifort</span> <span class="at">-o</span> visual.exe  visual.f90 </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> visual.exe  ~/.soft/vasp/vaspshell/  </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> Projection</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#---------------</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="ex">correct</span> MKLROOT, </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#---------------</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> projection ~/.soft/vasp/vaspshell/projection.exe</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a> <span class="ex">get</span> projection,  use this one rather the one in projection_v.1.1.2.tgz   </span></code></pre></div>
<h1 data-number="2" id="example"><span class="header-section-number">2</span> Example</h1>
<ol type="1">
<li>Add <code>LNBO=.FALSE.; LWAVE=.TRUE.</code> to INCAR of single point calculation and run <code>mpirun -np 16 vasp.impi.nbo</code>.</li>
<li>Modify INCAR file, add <code>LNBO=.TRUE.; ISTART=1; EDIFF=1E-5</code> and delete <code>NPAR</code> (important) and run <code>mpirun -np 16 vasp.impi.nbo</code> again. Tip: The parallel calculation of VASP is based on bands, so “NBANDS” will be times of cores used. But too many unoccupied bands will lead to unphysical eigenvalue, leading to failure of projection at the next step. So do not use too many cores.<br />
</li>
<li>At bash shell, run<code>export OMP_NUM_THREADS=4 &amp;&amp; export OMP_STACKSIZE=4000mb &amp;&amp; ulimit -s unlimited</code>.</li>
<li>Prapare <strong>basis.inp</strong> file from ${soft_root}/gaussian/basis/6-311G.g94, <strong>basis.inp</strong> like<br />
</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">****</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">B</span>     0</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">S</span>   6   1.00</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>   <span class="ex">2858.8900000</span>              0.00215375</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">428.1400000</span>              0.0165823</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>     <span class="ex">97.5282000</span>              0.0821870</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>     <span class="ex">27.9693000</span>              0.2766180</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>      <span class="ex">8.2157700</span>              0.6293160</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>      <span class="ex">1.1127800</span>              0.1737700</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="ex">SP</span>   3   1.00</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>     <span class="ex">13.2415000</span>              0.1174430              0.0418100</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>      <span class="ex">3.0016600</span>              0.9180020              0.2365750</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.9128560</span>             <span class="at">-0.00265105</span>             0.8162140</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="ex">SP</span>   1   1.00</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.3154540</span>              1.0000000              1.0000000</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="ex">SP</span>   1   1.00</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.0988563</span>              1.0000000              1.0000000</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="ex">D</span>   1   1.00</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.4010000</span>              1.0000000</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="ex">****</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="ex">C</span>     0</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="ex">S</span>   6   1.00</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>   <span class="ex">4563.2400000</span>              0.00196665</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="ex">682.0240000</span>              0.0152306</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="ex">154.9730000</span>              0.0761269</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>     <span class="ex">44.4553000</span>              0.2608010</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>     <span class="ex">13.0290000</span>              0.6164620</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>      <span class="ex">1.8277300</span>              0.2210060</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="ex">SP</span>   3   1.00</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>     <span class="ex">20.9642000</span>              0.1146600              0.0402487</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>      <span class="ex">4.8033100</span>              0.9199990              0.2375940</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>      <span class="ex">1.4593300</span>             <span class="at">-0.00303068</span>             0.8158540</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="ex">SP</span>   1   1.00</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.4834560</span>              1.0000000              1.0000000</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="ex">SP</span>   1   1.00</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.1455850</span>              1.0000000              1.0000000</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="ex">D</span>   1   1.00</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>      <span class="ex">0.6260000</span>              1.0000000</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="ex">****</span></span></code></pre></div>
<p>and run <code>projection.exe</code> at bash shell.<br />
5. Convert CONTCAR to vasp 4 format (no element line). Prepare <strong>SSAdNDP.inp</strong> like this</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">GENERAL</span> SEARCH INPUT FILE</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Prepare</span> files for visualization: T/F<span class="pp">?</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ex">T</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of different types of bonds in general search:</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of centers, ON threshold, Distance threshold:</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span> 1.85 2.0</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span> 1.75 2.0</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span> 1.85 2.5</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span> 1.75 3.0</span></code></pre></div>
<p>and run <code>ssadndp.exe SSAdNDP.inp resid_gen.dat  T</code>.<br />
6. You should delete resid_gen.dat for a new scheme, while you should keep it for continuing searching. For user directed mode, Prepare <code>SSAdNDP-UD.inp</code> like this</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">USER-DIRECTED</span> SEARCH INPUT FILE</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Prepare</span> files for visualization: T/F<span class="pp">?</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">T</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of fragments to search on:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of centers on fragment 1:</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Atom</span> numbers, cell a,b,c:</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="ex">2,</span> 0 0 0</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="ex">4,</span> 0 0 0</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="ex">5,</span> 0 0 0</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="ex">13,</span> 0 0 0</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="ex">8,</span> 0 0 0</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="ex">10,0</span> 0 0</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="ex">12,0</span> 0 0</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of bonds on fragment 1:</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of centers on fragment 2:</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="ex">Atom</span> numbers, cell a,b,c:</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="ex">1,</span> 0 0 0</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="ex">3,</span> 0 0 0</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="ex">6,</span> <span class="at">-1</span> <span class="at">-1</span> 0</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="ex">7,</span> 0 <span class="at">-1</span> 0</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="ex">9,</span> 0 <span class="at">-1</span> 0</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="ex">11,</span> 0 0 0</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="ex">14,</span> <span class="at">-1</span> 0 0</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of bonds on fragment 2:</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span></span></code></pre></div>
<p>and run <code>ssadndp.exe SSAdNDP-UD.inp resid_gen.dat  T</code>. Tips: Translating the fragment may avoid the belt on the edge.<br />
7. If you get <strong>vis_gs_*-bonds.out</strong> from general mode or vis_ud_bonds.out from user directed mode, run <code>visual.exe  vis_gs_4c-bonds.out 81 81 81 T</code> or run <code>visual.exe vis_ud_bonds.out  81 81 81 T</code>.<br />
8. Open <strong>lattice_vec.cube</strong> in VESTA, uncheck <code>Style-&gt;Volumetric data-&gt;Show Sections</code>.<br />
9. in Vesta, <code>Edit-&gt;Edit Data-&gt;Phases</code>, import cube file (e.g., gs_3c-bond_1.cube or ud_bond_1.cube), and set positioning for this layer to “0.5 0.5 0.5” ( or 0.16666/0.83333 rather than 0.5) and Apply.</p>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/pandocmodels/sidebar/js/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="/pandocmodels/sidebar/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/pandocmodels/sidebar/js/ie10-viewport-bug-workaround.js"></script>
    <script>
        //document.getElementById('sidebar').getElementsByTagName('ul')[0].className += "nav nav-sidebar";
        
        /* ajust the height when click the toc
           the code is from https://github.com/twbs/bootstrap/issues/1768
        */
        var shiftWindow = function() { scrollBy(0, -50) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
        
        /*add Bootstrap styles to tables*/
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; ++i){
            tables[i].className += "table table-bordered table-hover";
        }
    </script>
<script type="text/javascript" color="208,55,66" pointColor="255,0,0"  opacity="0.5" count="200" src="/js4mu/canvas/canvas-nest.js"></script>
<script type="text/javascript" src="/js4mu/canvas/canvas-nest.umd.js"></script>
  </body>
</html>
