<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="generator" content="pandoc">
    <meta name="description" content="">
    <meta name="author" content="Caesarmu">
    <meta name="dcterms.date" content=" 01/03/2024">
  <title>NEB for VASP</title>
  <!-- script type="text/javascript">var filename=location.href;filename=filename.substr(filename.lastIndexOf('/')+1);document.title="NEB for VASP"+"("+filename+")";</script -->
    <!-- Bootstrap core CSS -->
    <link href="/pandocmodels/sidebar/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/pandocmodels/sidebar/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/pandocmodels/sidebar/css/dashboard.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">.sidebar ul{padding-left: 10px;}</style>
  <!-- style type="text/css">
            width:1220px;
            height:1100px;
            border:solid 1px #ccc;
            /*background:#f4f4f4;*/
            background:#f4f4f4;
        }
  </style -->
  <style type="text/css">
  #hitokoto{
    background-color: #3288d31a;
    padding: 10px;text-align: center;
    color: blue;
    font-weight: bold;
    font-size: 1.2em;
    margin: 5px 0 5px 0;
}
div.card {
   background-color: #f5f5f5;
   color: black;
   text-align: center;
   margin: 0 auto;
   width: 85%;
   max-width: 90%;
}
div.container {
   padding: 10px;
   background-color: white;
}
button{
  border:groove 0.2em gray;
  border-radius:0.4em;
}
  </style>

<script>
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      const hitokoto = document.getElementById('hitokoto_text')
      hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
      hitokoto.innerText = data.hitokoto + " --- " + data.from
    })
    .catch(console.error)
</script>

          <div class='content-body'>
              <p id="hitokoto"><a href="#" id="hitokoto_text">:D 获取中...</a> </p>
          </div>
          

  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/index.html">Home</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/paper.html">Publication</a></li>
            <li><a href="/post.html">Post</a></li>
            <li class="dropdown">
              <a href="/index.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Links <span class="caret"></span></a>
              <ul class="dropdown-menu">  
            <li><a href="/editor/" target="_blank" >MarkDown</a></li>
            <li><a href="/svgedit/editor/svg-editor.html" target="_blank" >SvgEdit</a></li>
            <li><a href="/my-mind/" target="_blank" >MindMap</a></li>
            <li><a target="_blank" href="https://materialsproject.org/">PyMatGen</a></li>
            <li><a target="_blank" href="/games/gold/">GoldMiner</a></li>
            <li><a target="_blank" href="/games/Space/">SpaceInvaders</a></li>
            <li><a target="_blank" href="/games/mario/">SuperMario</a></li>
            <li><a target="_blank" href="/games/star/">StarBattle</a></li>
                <li role="separator" class="divider"></li>
                <li><a  target="_blank" href="http://ims.sxu.edu.cn/">SXU IMS</a></li>
            <li><a target="_blank" href="https://vpn.sxu.edu.cn/portal/">SXU VPN</a></li>
                <li><a  target="_blank" href="http://mail.sxu.edu.cn/">SXU MAIL</a></li>
                <li><a  target="_blank" href="http://ehall.sxu.edu.cn/">SXU MYPORTAL</a></li>
              </ul>
            </li>
            <li><span id="badgeCont708"><script type="text/javascript" src="https://publons.com/mashlets?el=badgeCont708&rid=B-2057-2012&size=small"></script></span></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div id="sidebar" class="col-sm-3 col-md-2 sidebar">
          <!--<ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
          </ul>-->
          <ul>
          <li><a href="#neb"><span class="toc-section-number">1</span> NEB</a>
          <ul>
          <li><a href="#vasp"><span class="toc-section-number">1.1</span> VASP:</a></li>
          <li><a href="#vtst"><span class="toc-section-number">1.2</span> VTST:</a></li>
          <li><a href="#images"><span class="toc-section-number">1.3</span> Images:</a></li>
          <li><a href="#encut"><span class="toc-section-number">1.4</span> ENCUT:</a></li>
          <li><a href="#ediffg"><span class="toc-section-number">1.5</span> EDIFFG:</a></li>
          </ul></li>
          <li><a href="#other-tips"><span class="toc-section-number">2</span> Other Tips</a></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        
<h1 data-number="1" id="neb"><span class="header-section-number">1</span> NEB</h1>
<ul>
<li>转载自：<a href="http://blog.sina.com.cn/s/blog_b364ab230102v1wk.html" class="uri">http://blog.sina.com.cn/s/blog_b364ab230102v1wk.html</a></li>
</ul>
<p>The VASP manual has a brief description of how to perform elastic band calculations on this page: <a href="http://cms.mpi.univie.ac.at/vasp/vasp/Elastic_band_method.html" class="uri">http://cms.mpi.univie.ac.at/vasp/vasp/Elastic_band_method.html</a> You can also check the VASP forum for answers and post a question there if it has not already been answered:<a href="http://cms.mpi.univie.ac.at/vasp-forum/forum.php" class="uri">http://cms.mpi.univie.ac.at/vasp-forum/forum.php</a> While the method currently implemented in VASP is reasonable, I would suggest that you check out the Transition State Tools for VASP from the Henkelman group at UT Austin: <a href="http://theory.cm.utexas.edu/vtsttools/" class="uri">http://theory.cm.utexas.edu/vtsttools/</a></p>
<p>In particular, the climbing image method is very useful for efficiently finding saddle points and their optimizers seem to be better for converging NEB calculations than the ones included in VASP.</p>
<p>They also have a forum which can be very helpful: <a href="http://theory.cm.utexas.edu/forum/" class="uri">http://theory.cm.utexas.edu/forum/</a> Professor Henkelman regularly responds to posts on this forum and is very helpful.</p>
<h2 data-number="1.1" id="vasp"><span class="header-section-number">1.1</span> VASP:</h2>
<p>One problem of the nudged elastic band method is that the constraint (i.e movements only in the hyper-plane perpendicular to the current tangent) is non linear. Therefore, the CG algorithm usually fails to converge, and we recommended to use the RMM-DIIS algorithm (IBRION=1) or the quick-min algorithm (IBRION=3). Additionally, the non-linear constraint (equidistant images) tends to be violated significantly during the first few steps (it is only enforced to first order). If this problem is encountered, a very low dimensionality parameter (IBRION=1, NFREE=2) should be applied in the first we steps, or a steepest descent minimization without line optimization (IBRION=3, SMASS=2). should be used, to pre-converge the images.Finally, we strongly recommend to keep the number of images to an absolute minimum. The fewer images are used the faster to convergence to the groundstate is. Often, it is advisable to start with a single image between the two endpoints, and to increase the number of images, once this first run has converged.</p>
<p>using the built-in conjugate gradients IBRION=2, is not appropriate to use with the NEB. While it might have converged in your case, it is not generally safe to use because the line optimizer uses the energy as well as the force. In the NEB, the forces are not conservative and the energy is not consistent with the force. Thus, the bracketing method in the line search can fail.</p>
<h2 data-number="1.2" id="vtst"><span class="header-section-number">1.2</span> VTST:</h2>
<p>The quasi-Newton and quick-min (IBRION=1 and 3 respectively) optimizers that are built into VASP are both force-based, but the conjugate-gradient method (IBRION=2) is not.</p>
<p>Here, we present a set of optimizers that are all force-based so they can be used with the NEB and min-mode following methods. To use them, the INCAR must set IBRION=3 and POTIM=0, to disable the built in optimizers. Then, the IOPT parameter will select one of the following methods.</p>
<p>This version of quick-min is essential the same as what has been implemented in vasp. The conjugate-gradient method is different in that is uses a Newton’s line optimizer, and are entirely force based. The LBFGS is also different in that the NEB can be optimized globally, instead of image-by-image. The FIRE optimizer is an interesting new optimizer which has similarities to quick-min, but tends to be faster. The steepest descent method is provided primarily for testing. We recommend using CG or LBFGS when accurate forces are available. This is essential for evaluating curvatures. For high forces (far from the minimum) or inaccurate forces (close to the minimum) the quick-min or FIRE methods are recommended. These two methods do not rely on curvatures, and tend to be less aggressive, better behaved, but also less efficient than CG/LBFGS.</p>
<p>(IOPT = 0) Use VASP optimizers specified from IBRION (default)</p>
<p>(IOPT = 1) LBFGS = Limited-memory Broyden-Fletcher-Goldfarb-Shanno</p>
<p>(IOPT = 2) CG = Conjugate Gradient</p>
<p>(IOPT = 3) QM = Quick-Min</p>
<p>(IOPT = 4) SD = Steepest Descent</p>
<p>(IOPT = 7) FIRE = Fast Inertial Relaxation Engine</p>
<h2 data-number="1.3" id="images"><span class="header-section-number">1.3</span> Images:</h2>
<p>To the extent that the path is linear, a single image will be fine.We don’t have any way to estimate how linear a path is without calculating it. For simple elementary processes we generally use 3-5 images.Also, there are some elementary reactions for which more (about 8) images are required. The dissociative adsorption reaction of a molecule on a surface, for example, can be a long overall path with a short curved segment near the adsorbed state.</p>
<p>I recommend starting with about 4 images. If you find that your paths are linear, you could get away with fewer, but if convergence of the 4-image band is slow or the path is too long to adequately resolve it, go up to 6 or 8. If you find any intermediate minima along the path, it can be faster to break up your calculation into two NEB calculations instead of using a long single band.</p>
<p>Distances between images approaching 2 Angstroms is quite large.</p>
<p>A linear initial path can be very poor if you have a rotating molecule. You would probably do better by constructing a path yourself. One way to do this is to make an intermediate structure with the molecule rotated half way. Then you can connect two linear paths (initial to intermediate) and (intermediate to final) as your initial path.</p>
<p>A time step of 0.01 is pretty small. If you run for 10 or 20 iterations and the forces drop to below 1 eV/Ang and your path looks reasonable, then you can be more aggressive. If you find that the molecule does strange things along the path, then try again with a new initial path.</p>
<h2 data-number="1.4" id="encut"><span class="header-section-number">1.4</span> ENCUT:</h2>
<p>it is generally safe to start with a low encut to optimize your path and then increase accuracy to get a precise saddle point energy.</p>
<h2 data-number="1.5" id="ediffg"><span class="header-section-number">1.5</span> EDIFFG:</h2>
<p>start with -0.05, then -0.01 is ok.</p>
<p>You should have the elements in the first line of the POSCAR, that way you can generate a movie with nebmovie.pl to visualize the process. (不知道新版是否适用）The energy used to define the tangent in the NEB routine is the free energy F, not the E(sigma-&gt;0). We use the free energy in the NEB routine because it is consistent with the forces. In principle, it may be better to use the sigma-&gt;0 extrapolated energy, but this is not what we have done.</p>
<p>POTIM = 0.01 is rather small, usually 0.1 is more reasonable as a first guess. Using IBRION=3 and POTIM=0.1 is a very safe setting. It will not be the most efficient, but the force should systematically drop.I do not recommend changing the spring constant. Also, check the energy. If the forces are fluctuating around 0.1 or 0.2 eV/Ang, this only indicates poor convergence if the energy is not changing. If the energy of the image is systematically changing, the calculation could be working properly. Finally, we have found better convergence using our force-based conjugate gradient or FIRE optimizers. If the band is converging slowly, one of these optimizers could improve the convergence rate.</p>
<p>当原子靠的太近力太大，可以用脚本或自己手动调一下原子位置， Using IBRION=3 and POTIM=0.01 for 10 or 20 iterations is usually enough to bring the forces down to a reasonable 1-10 eV/Ang. At this point, POTIM can be raised to 0.1 or a more aggressive optimizer can be used. If you are using our new optimizers, you can also constrain the optimization by choosing a small value of MaxMove.脚本： the allowed distance between any two atoms in the system is no more than 0.3 Angstrom; otherwise, a spring force would be applied to those involved atoms and push them apart little by little. You can change the value as you like, but it should not be a big value; 0.1-0.3 should be enough. I don’t think it makes sense to converge the neb without climbing image and then turn it on.</p>
<h1 data-number="2" id="other-tips"><span class="header-section-number">2</span> Other Tips</h1>
<ul>
<li>“If the forces are high, and stay high, it could be a result of the small radius of convergence of the LBFGS (IBRION=1) method, due to how it is coupled to the NEB in vasp. Using IBRION=3 and a small POTIM=0.01 is generally a safe and quick way to bring the NEB forces down to the 0.5 eV/Ang range. Then you should be able to use a more aggressive time step (POTIM=0.1), or switch to a second order optimizer, such as IBRION=1.” by <a href="https://www.vasp.at/forum/viewtopic.php?t=4045">graeme</a></li>
</ul>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/pandocmodels/sidebar/js/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="/pandocmodels/sidebar/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/pandocmodels/sidebar/js/ie10-viewport-bug-workaround.js"></script>
    <script>
        //document.getElementById('sidebar').getElementsByTagName('ul')[0].className += "nav nav-sidebar";
        
        /* ajust the height when click the toc
           the code is from https://github.com/twbs/bootstrap/issues/1768
        */
        var shiftWindow = function() { scrollBy(0, -50) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
        
        /*add Bootstrap styles to tables*/
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; ++i){
            tables[i].className += "table table-bordered table-hover";
        }
    </script>
<script type="text/javascript" color="208,55,66" pointColor="255,0,0"  opacity="0.5" count="200" src="/js4mu/canvas/canvas-nest.js"></script>
<script type="text/javascript" src="/js4mu/canvas/canvas-nest.umd.js"></script>
  </body>
</html>
